targets="dnf_conversion"
sources="dnf_conversion.cpp"

defvars() {
    cat <<EOF
ECRASH_TEST_SOURCES=$(echo " $sources" | sed "s% % ${input_base}/%g")
ECRASH_TEST_OBJECTS=\$(patsubst %.cpp,%.o,\$(ECRASH_TEST_SOURCES))
ECRASH_TEST_DEPS=\$(patsubst %.cpp,%.cpp.d,\$(ECRASH_TEST_SOURCES))
all_sources+=\$(ECRASH_SOURCES)
EOF
}

rules() {
    cat <<EOF
\$(ECRASH_TEST_OBJECTS): CPPFLAGS+=-Isli -I\$(libvex)/pub
\$(ECRASH_TEST_DEPS): CPPFLAGS+=-Isli -I\$(libvex)/pub
$targets: slir.a libVEX.a

dnf_conversion: \$(ECRASH_TEST_OBJECTS)
	gcc -lsqlite3 -lrt \$(PROFILE_FLAGS) -lstdc++ \$^ -o \$@
EOF
}
